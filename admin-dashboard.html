<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard - Rajbahal Digital</title>
    <style>
        body{font-family:Arial;background:#f4f4f4;padding:20px}
        .card{background:white;padding:15px;margin-bottom:10px;border-radius:8px;box-shadow:0 2px 5px rgba(0,0,0,0.1); border-left: 5px solid #004aad;}
        .details{margin-bottom:10px; font-size:14px;}
        .time-tag{background:#fff3cd; color:#856404; padding:2px 5px; border-radius:3px; font-weight:bold;}
        button{margin:5px;padding:8px 12px;border:none;border-radius:5px;cursor:pointer;color:white}
        .whatsapp{background:#25D366; text-decoration:none; display:inline-block;}
    </style>
</head>
<body>
    <h2>Admin Dashboard (New Bookings)</h2>
    <div id="data">Loading...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAA36vfnM77LgCMJgjTHx8wsGYoBQHzXIQ",
            databaseURL: "https://education-c3132-default-rtdb.firebaseio.com",
            projectId: "education-c3132"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        onValue(ref(db, "appointments"), (snapshot)=>{
            const container = document.getElementById("data");
            container.innerHTML = "";
            snapshot.forEach((child)=>{
                const data = child.val();
                const waLink = `https://wa.me/91${data.phone}?text=Namaste%20${data.name},%20Aapka%20appointment%20${data.appointmentDate}%20ko%20${data.appointmentTime}%20baje%20APPROVE%20ho%20gaya%20hai.`;

                container.innerHTML += `
                    <div class="card">
                        <div class="details">
                            <b>Name:</b> ${data.name} | <b>Service:</b> ${data.service}<br>
                            <b>Phone:</b> ${data.phone}<br>
                            <b>Date:</b> <span class="time-tag">${data.appointmentDate}</span> | 
                            <b>Time:</b> <span class="time-tag">${data.appointmentTime}</span>
                        </div>
                        <a href="${waLink}" target="_blank" class="whatsapp" style="padding:8px 12px; border-radius:5px; color:white;">WhatsApp Approve âœ…</a>
                    </div>
                `;
            });
        });
    </script>
</body>
</html>
